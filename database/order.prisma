enum PaymentType {
  STRIPE
  CRYPTO
  PAYPAL
}

enum OrderStatus {
  PENDING
  PAID
  DELIVERED
  CANCELLED
}

model OrderItem {
  id String @id @default(cuid())

  orderId String
  order   Order  @relation(fields: [orderId], references: [id], onDelete: Cascade)

  productId String
  product   Product @relation(fields: [productId], references: [id], onDelete: Cascade)

  quantity Int
  price    Float

  codes String[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model CustomerInformation {
  id      String  @id @default(cuid())
  name    String
  email   String

  useragent String?
  ipAddress String?

  discord String?
  order   Order?
}

model Order {
  id          String    @id @default(cuid())
  totalPrice  Float
  paymentFee  Float     @default(0)
  paymentType PaymentType
  status      OrderStatus
  couponUsed  String?
  discountAmount Float @default(0)

  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  paypalNote  String?

  OrderItem   OrderItem[]

  customer   CustomerInformation @relation(fields: [customerId], references: [id], onDelete: Cascade)
  customerId String @unique

  Wallet Wallet[]
}